{
  # Local development - no HTTPS
  auto_https off
}

# Local development configuration
cinedock {
  # Static files and media from backend
  handle /media* {
    reverse_proxy backend:8000
  }

  # API requests go to backend
  handle /api* {
    reverse_proxy backend:8000
  }

  # Everything else goes to frontend
  handle {
    reverse_proxy frontend:5173
  }
}

# Also support localhost for testing
localhost:80 {
  # Static files and media from backend
  handle /media* {
    reverse_proxy backend:8000
  }

  # API requests go to backend
  handle /api* {
    reverse_proxy backend:8000
  }

  # Everything else goes to frontend
  handle {
    reverse_proxy frontend:5173
  }
}

# Production configuration (commented out for local development)
# Replace example.com with your actual domain
# example.com {
#   # Static files and media from backend
#   handle /media* {
#     reverse_proxy backend:8000
#   }
#
#   # API requests go to backend
#   handle /api* {
#     reverse_proxy backend:8000
#   }
#
#   # Everything else goes to frontend
#   handle {
#     reverse_proxy frontend:5173
#   }
#
#   # Enable HTTPS with Let's Encrypt
#   encode gzip
# }
